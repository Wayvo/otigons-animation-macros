{"name":"AuraAttach","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.16NIuSafXznXfI1E"}},"scope":"global","command":"// Use this macro in the \"On-Use Macro\" Field in the details page (bottom) of the item/spell\n// Requires Token Attacher module\n// Suggested to use Token Magic FX to apply a template animation to the aura/spell when cast and placed down\n\n/* For example: Spirit Guardians. Use this macro in the on-use field and set an animation for the template in Token Magic FX.\nWhen you cast the spell drop it on the canvas with your token at the center. This reads the center location of the template and\nautomatically attaches it to your token\n*/\n\nasync function TemplateAttach() {\n    const templateID = canvas.templates.placeables[canvas.templates.placeables.length - 1].data._id;\n    let template = await canvas.templates.get(templateID);\n    let target_token = canvas.tokens.placeables.find(i => i.center.x === template.center.x && i.center.y === template.center.y);\n    tokenAttacher.attachElementToToken(template, target_token)\n}\nTemplateAttach();","author":"ccsO3NtPJs2xE1RS","img":"icons/svg/target.svg","actorIds":[],"_id":"NUuF0BCrYltGNf7b"}
