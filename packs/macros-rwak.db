{"name":"ArrowGreen","permission":{"default":0,"OAAx1jKOg1dYBpA6":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif (game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif (canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\n    var myStringArray = Array.from(game.user.targets)[0];\n    var arrayLength = game.user.targets.size;\n    for (var i = 0; i < arrayLength; i++) {\n\n        await sleepNow(500)\n\n        let mainTarget = Array.from(game.user.targets)[i];\n        let myToken = canvas.tokens.controlled[0];\n\n        let ray = new Ray(myToken.center, mainTarget.center);\n        let anDeg = -(ray.angle * 57.3);\n        let anDist = ray.distance;\n        // Animation file path\n        let file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n        // Checking for range to target to choose which file to pull\n        let anFile = `${file}Arrow01_01_Glowing_Green_30ft_1600x400.webm`;\n        let anFileSize = 600;\n        let anchorX = 0.125;\n        switch (true) {\n            case (anDist <= 1200):\n                anFileSize = 1200;\n                anFile = `${file}Arrow01_01_Glowing_Green_30ft_1600x400.webm`;\n                anchorX = 0.125;\n                break;\n            case (anDist > 2400):\n                anFileSize = 3600;\n                anFile = `${file}Arrow01_01_Glowing_Green_90ft_4000x400.webm`;\n                anchorX = 0.05;\n                break;\n            default:\n                anFileSize = 2400;\n                anFile = `${file}Arrow01_01_Glowing_Green_60ft_2800x400.webm`;\n                anchorX = 0.071;\n                break;\n        }\n        // Scaling the Height of the animation for consistency across ranges\n        let anScale = anDist / anFileSize;\n        let anScaleY = anDist <= 600 ? 0.6 : anScale;\n\n        let spellAnim =\n        {\n            file: anFile,\n            position: myToken.center,\n            anchor: {\n                x: anchorX,\n                y: 0.5\n            },\n            angle: anDeg,\n            scale: {\n                x: anScale,\n                y: anScaleY\n            }\n        };\n\n        canvas.fxmaster.playVideo(spellAnim);\n        game.socket.emit('module.fxmaster', spellAnim);\n\n        // Add some sound to the arrow\n        /*\n        await sleepNow(300);\n        let soundFile = `sound path here`;\n        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n        */\n        // Or play random sounds on each attack\n        /*\n        let soundHome = \"CustomSounds/battle/\";\n        \n        let m1 = `sound 01 file location here`;\n        let m2 = `sound 02 file location here`;\n        function random_sound(sounds)\n        {\n        return sounds[Math.floor(Math.random()*sounds.length)];\n        }\n        \n        var sounds = [m1, m2];\n        \n        let roll = new Roll('1d3').roll().total;\n        let soundFile = random_sound(sounds);\n        AudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n        */\n    }\n}\nCast()","author":"OAAx1jKOg1dYBpA6","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/Arrow01_01_Glowing_Green_Thumb.webp","actorIds":[],"_id":"2j0KIiIfSAQUCbdx"}
{"_id":"BArgcs9KgDPB5YXF","name":"SpearThrown","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}Spear01_01_Regular_White_15ft_1000x400.webm`;\nlet anFileSize = 600;\nlet anchorX = 0.2;\nswitch(true){\n case (anDist<=600):\n    anFileSize = 600;\n    anFile = `${file}Spear01_01_Regular_White_15ft_1000x400.webm`;\n    anchorX = 0.2;\n    break;\n case (anDist>1200):\n    anFileSize = 1800;\n    anFile = `${file}Spear01_01_Regular_White_45ft_2200x400.webm`;\n    anchorX = 0.091;\n    break;\n default:\n    anFileSize = 1200;\n    anFile = `${file}Spear01_01_Regular_White_30ft_1600x400.webm`;\n    anchorX = 0.125;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.9  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n\n// Add some sound to the spear\n/*\nawait sleepNow(300);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n// Or play random sounds on each attack\n/*\nlet soundHome = \"CustomSounds/battle/\";\n\nlet m1 = `sound 01 file location here`;\nlet m2 = `sound 02 file location here`;\nfunction random_sound(sounds)\n{\nreturn sounds[Math.floor(Math.random()*sounds.length)];\n}\n\nvar sounds = [m1, m2];\n\nlet roll = new Roll('1d3').roll().total;\nlet soundFile = random_sound(sounds);\nAudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast ()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/Spear01_01_Regular_White_Thumb.webp","actorIds":[]}
{"_id":"CBm70KLUTUvTVj6O","name":"ArrowAcid","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.AMmnORmogy0laIOn"}},"scope":"global","command":"// Requires at least 1 target\nif (game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif (canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\n    var myStringArray = Array.from(game.user.targets)[0];\n    var arrayLength = game.user.targets.size;\n    for (var i = 0; i < arrayLength; i++) {\n\n        await sleepNow(500)\n\n        let mainTarget = Array.from(game.user.targets)[i];\n        let myToken = canvas.tokens.controlled[0];\n\n        let ray = new Ray(myToken.center, mainTarget.center);\n        let anDeg = -(ray.angle * 57.3);\n        let anDist = ray.distance;\n        // Animation file path\n        let file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n        // Checking for range to target to choose which file to pull\n        let anFile = `${file}Arrow01_01_Glowing_Green_30ft_1600x400.webm`;\n        let anFileSize = 600;\n        let anchorX = 0.125;\n        let boom = 1000;\n        switch (true) {\n            case (anDist <= 1200):\n                anFileSize = 1200;\n                anFile = `${file}Arrow01_01_Glowing_Green_30ft_1600x400.webm`;\n                anchorX = 0.125;\n                boom = 1250;\n                break;\n            case (anDist > 2400):\n                anFileSize = 3600;\n                anFile = `${file}Arrow01_01_Glowing_Green_90ft_4000x400.webm`;\n                anchorX = 0.05;\n                boom = 1750;\n                break;\n            default:\n                anFileSize = 2400;\n                anFile = `${file}Arrow01_01_Glowing_Green_60ft_2800x400.webm`;\n                anchorX = 0.071;\n                boom = 1500;\n                break;\n        }\n        // Scaling the Height of the animation for consistency across ranges\n        let anScale = anDist / anFileSize;\n        let anScaleY = anDist <= 600 ? 0.6 : anScale;\n\n        let spellAnim =\n        {\n            file: anFile,\n            position: myToken.center,\n            anchor: {\n                x: anchorX,\n                y: 0.5\n            },\n            angle: anDeg,\n            scale: {\n                x: anScale,\n                y: anScaleY\n            }\n        };\n\n        let spellAnim2 =\n        {\n            file: \"modules/jb2a_patreon/Library/Generic/Explosion/Explosion_01_Green_400x400.webm\",\n            position: mainTarget.center,\n            anchor: {\n                x: 0.5,\n                y: 0.5\n            },\n            angle: 0,\n            scale: {\n                x: 1,\n                y: 1\n            }\n        };\n\n        canvas.fxmaster.playVideo(spellAnim);\n        game.socket.emit('module.fxmaster', spellAnim);\n        // Add some sound to the arrow\n        /*\n        let soundFile = `sound path here`;\n        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n        */\n        await sleepNow(boom);\n        canvas.fxmaster.playVideo(spellAnim2);\n        game.socket.emit('module.fxmaster', spellAnim2);\n        // Add some explosive sound to the effect\n        /*\n        await sleepNow(150);\n        let soundFile = `explosion sound path here`;\n        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n        */\n    }\n}\nCast()","author":"ccsO3NtPJs2xE1RS","img":"systems/dnd5e/icons/spells/fog-acid-3.jpg","actorIds":[]}
{"name":"LaserShotBlue","permission":{"default":0,"OAAx1jKOg1dYBpA6":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.lElITWAgsh1NVyd9"}},"scope":"global","command":"// Requires at least 1 target\nif (game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif (canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\n    var myStringArray = Array.from(game.user.targets)[0];\n    var arrayLength = game.user.targets.size;\n    for (var i = 0; i < arrayLength; i++) {\n\n        await wait(500)\n\n        let mainTarget = Array.from(game.user.targets)[i];\n        let myToken = canvas.tokens.controlled[0];\n\n        let ray = new Ray(myToken.center, mainTarget.center);\n        let anDeg = -(ray.angle * 57.3);\n        let anDist = ray.distance;\n        // Animation file path\n        let file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n        // Checking for range to target to choose which file to pull\n        let anFile = `${file}LaserShot_01_Regular_Blue_30ft_1600x400.webm`;\n        let anFileSize = 600;\n        let anchorX = 0.125;\n        switch (true) {\n            case (anDist <= 1200):\n                anFileSize = 1200;\n                anFile = `${file}LaserShot_01_Regular_Blue_30ft_1600x400.webm`;\n                anchorX = 0.125;\n                break;\n            case (anDist > 2400):\n                anFileSize = 3600;\n                anFile = `${file}LaserShot_01_Regular_Blue_90ft_4000x400.webm`;\n                anchorX = 0.05;\n                break;\n            default:\n                anFileSize = 2400;\n                anFile = `${file}LaserShot_01_Regular_Blue_60ft_2800x400.webm`;\n                anchorX = 0.071;\n                break;\n        }\n        // Scaling the Height of the animation for consistency across ranges\n        let anScale = anDist / anFileSize;\n        let anScaleY = anDist <= 600 ? 0.6 : anScale;\n\n        let spellAnim =\n        {\n            file: anFile,\n            position: myToken.center,\n            anchor: {\n                x: anchorX,\n                y: 0.5\n            },\n            angle: anDeg,\n            scale: {\n                x: anScale,\n                y: anScaleY\n            }\n        };\n\n        let colorWave =\n            [{\n                filterType: \"wave\",\n                filterId: \"myShockwave\",\n                time: 0,\n                strength: 0.03,\n                frequency: 15,\n                maxIntensity: 4.0,\n                minIntensity: 0.5,\n                padding: 25,\n                animated:\n                {\n                    time:\n                    {\n                        active: true,\n                        speed: 0.0180,\n                        animType: \"move\",\n                    }\n                }\n            },\n            {\n                filterType: \"xfire\",\n                filterId: \"myColdXFire\",\n                time: 0,\n                color: 0x0075B0,\n                blend: 1,\n                amplitude: 1,\n                dispersion: 0,\n                chromatic: false,\n                scaleX: 1,\n                scaleY: 1,\n                inlay: false,\n                animated:\n                {\n                    time:\n                    {\n                        active: true,\n                        speed: -0.0015,\n                        animType: \"move\"\n                    }\n                }\n            }];\n\n        async function SpellAnimation(number) {\n\n            let x = number;\n            let interval = 250;\n            for (var i = 0; i < x; i++) {\n                setTimeout(function () {\n                    canvas.fxmaster.playVideo(spellAnim);\n                    game.socket.emit('module.fxmaster', spellAnim);\n                    // Add Sound in the loop\n                    /*\n                        let soundFile = `sound path and file here`;\n                        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n                    */\n                }, i * interval);\n            }\n            await wait(interval * x + 500);\n            // Removes TMFX after animation loops\n            /*\n            TokenMagic.deleteFiltersOnTargeted();\n            */\n        }\n        // The number in parenthesis sets the number of times the animation loops\n        SpellAnimation(3)\n\n        // Adds TMFX to target\n        /*\n        await wait(250);\n        TokenMagic.addUpdateFiltersOnTargeted(colorWave);\n        */\n\n    }\n}\nCast()","author":"OAAx1jKOg1dYBpA6","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/LaserShot_01_Regular_Blue_Thumb.webp","actorIds":[],"_id":"GRc3MpYR91G2bs1G"}
{"_id":"ICiM11paNoooh7B5","name":"HammerThrown","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}Hammer01_01_Regular_White_15ft_1000x400.webm`;\nlet anFileSize = 600;\nlet anchorX = 0.2;\nswitch(true){\n case (anDist<=600):\n    anFileSize = 600;\n    anFile = `${file}Hammer01_01_Regular_White_15ft_1000x400.webm`;\n    anchorX = 0.2;\n    break;\n case (anDist>1200):\n    anFileSize = 1800;\n    anFile = `${file}Hammer01_01_Regular_White_45ft_2200x400.webm`;\n    anchorX = 0.091;\n    break;\n default:\n    anFileSize = 1200;\n    anFile = `${file}Hammer01_01_Regular_White_30ft_1600x400.webm`;\n    anchorX = 0.125;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.6  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n// Add some sound to the axe throw\n/*\nawait sleepNow(300);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n// Or play random sounds on each attack\n/*\nlet soundHome = \"CustomSounds/battle/\";\n\nlet m1 = `sound 01 file location here`;\nlet m2 = `sound 02 file location here`;\nfunction random_sound(sounds)\n{\nreturn sounds[Math.floor(Math.random()*sounds.length)];\n}\n\nvar sounds = [m1, m2];\n\nlet roll = new Roll('1d3').roll().total;\nlet soundFile = random_sound(sounds);\nAudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast ()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/Hammer01_01_Regular_White_Thumb.webp","actorIds":[]}
{"name":"LaserShotGreen","permission":{"default":0,"OAAx1jKOg1dYBpA6":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.lElITWAgsh1NVyd9"}},"scope":"global","command":"// Requires at least 1 target\nif (game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif (canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\n    var myStringArray = Array.from(game.user.targets)[0];\n    var arrayLength = game.user.targets.size;\n    for (var i = 0; i < arrayLength; i++) {\n\n        await wait(500)\n\n        let mainTarget = Array.from(game.user.targets)[i];\n        let myToken = canvas.tokens.controlled[0];\n\n        let ray = new Ray(myToken.center, mainTarget.center);\n        let anDeg = -(ray.angle * 57.3);\n        let anDist = ray.distance;\n        // Animation file path\n        let file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n        // Checking for range to target to choose which file to pull\n        let anFile = `${file}LaserShot_01_Regular_Green_30ft_1600x400.webm`;\n        let anFileSize = 600;\n        let anchorX = 0.125;\n        switch (true) {\n            case (anDist <= 1200):\n                anFileSize = 1200;\n                anFile = `${file}LaserShot_01_Regular_Green_30ft_1600x400.webm`;\n                anchorX = 0.125;\n                break;\n            case (anDist > 2400):\n                anFileSize = 3600;\n                anFile = `${file}LaserShot_01_Regular_Green_90ft_4000x400.webm`;\n                anchorX = 0.05;\n                break;\n            default:\n                anFileSize = 2400;\n                anFile = `${file}LaserShot_01_Regular_Green_60ft_2800x400.webm`;\n                anchorX = 0.071;\n                break;\n        }\n        // Scaling the Height of the animation for consistency across ranges\n        let anScale = anDist / anFileSize;\n        let anScaleY = anDist <= 600 ? 0.6 : anScale;\n\n        let spellAnim =\n        {\n            file: anFile,\n            position: myToken.center,\n            anchor: {\n                x: anchorX,\n                y: 0.5\n            },\n            angle: anDeg,\n            scale: {\n                x: anScale,\n                y: anScaleY\n            }\n        };\n\n        let colorWave =\n            [{\n                filterType: \"wave\",\n                filterId: \"myShockwave\",\n                time: 0,\n                strength: 0.03,\n                frequency: 15,\n                maxIntensity: 4.0,\n                minIntensity: 0.5,\n                padding: 25,\n                animated:\n                {\n                    time:\n                    {\n                        active: true,\n                        speed: 0.0180,\n                        animType: \"move\",\n                    }\n                }\n            },\n            {\n                filterType: \"xfire\",\n                filterId: \"myColdXFire\",\n                time: 0,\n                color: 0x0075B0,\n                blend: 1,\n                amplitude: 1,\n                dispersion: 0,\n                chromatic: false,\n                scaleX: 1,\n                scaleY: 1,\n                inlay: false,\n                animated:\n                {\n                    time:\n                    {\n                        active: true,\n                        speed: -0.0015,\n                        animType: \"move\"\n                    }\n                }\n            }];\n\n        async function SpellAnimation(number) {\n\n            let x = number;\n            let interval = 250;\n            for (var i = 0; i < x; i++) {\n                setTimeout(function () {\n                    canvas.fxmaster.playVideo(spellAnim);\n                    game.socket.emit('module.fxmaster', spellAnim);\n                    // Add Sound in the loop\n                    /*\n                        let soundFile = `sound path and file here`;\n                        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n                    */\n                }, i * interval);\n            }\n            await wait(interval * x + 500);\n            // Removes TMFX after animation loops\n            /*\n            TokenMagic.deleteFiltersOnTargeted();\n            */\n        }\n        // The number in parenthesis sets the number of times the animation loops\n        SpellAnimation(3)\n\n        // Adds TMFX to target\n        /*\n        await wait(250);\n        TokenMagic.addUpdateFiltersOnTargeted(colorWave);\n        */\n\n    }\n}\nCast()","author":"OAAx1jKOg1dYBpA6","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/LaserShot_01_Regular_Green_Thumb.webp","actorIds":[],"_id":"OFVlirOqnvuz1siR"}
{"_id":"QOiyuwGx6Agr7iGp","name":"DaggerThrown01","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}Dagger01_01_Regular_White_15ft_1000x400.webm`;\nlet anFileSize = 600;\nlet anchorX = 0.2;\nswitch(true){\n case (anDist<=600):\n    anFileSize = 600;\n    anFile = `${file}Dagger01_01_Regular_White_15ft_1000x400.webm`;\n    anchorX = 0.2;\n    break;\n case (anDist>1200):\n    anFileSize = 1800;\n    anFile = `${file}Dagger01_01_Regular_White_45ft_2200x400.webm`;\n    anchorX = 0.091;\n    break;\n default:\n    anFileSize = 1200;\n    anFile = `${file}Dagger01_01_Regular_White_30ft_1600x400.webm`;\n    anchorX = 0.125;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.6  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n\n// Add some sound to the dagger\n/*\nawait sleepNow(300);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n// Or play random sounds on each attack\n/*\nlet soundHome = \"CustomSounds/battle/\";\n\nlet m1 = `sound 01 file location here`;\nlet m2 = `sound 02 file location here`;\nfunction random_sound(sounds)\n{\nreturn sounds[Math.floor(Math.random()*sounds.length)];\n}\n\nvar sounds = [m1, m2];\n\nlet roll = new Roll('1d3').roll().total;\nlet soundFile = random_sound(sounds);\nAudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast ()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/Dagger01_01_Regular_White_Thumb.webp","actorIds":[]}
{"_id":"StHpylaLe8YCEIOY","name":"JavelinThrow","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nawait sleepNow(500)\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}Javelin01_01_Regular_White_30ft_1600x400.webm`;\nlet anFileSize = 600;\nlet anchorX = 0.125;\nswitch(true){\n case (anDist<=1200):\n    anFileSize = 1200;\n    anFile = `${file}Javelin01_01_Regular_White_30ft_1600x400.webm`;\n    anchorX = 0.125;\n    break;\n case (anDist>2400):\n    anFileSize = 3600;\n    anFile = `${file}Javelin01_01_Regular_White_90ft_4000x400.webm`;\n    anchorX = 0.05;\n    break;\n default:\n    anFileSize = 2400;\n    anFile = `${file}Javelin01_01_Regular_White_60ft_2800x400.webm`;\n    anchorX = 0.071;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.6  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n\n// Add some sound to the javelin\n/*\nawait sleepNow(300);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n// Or play random sounds on each attack\n/*\nlet soundHome = \"CustomSounds/battle/\";\n\nlet m1 = `sound 01 file location here`;\nlet m2 = `sound 02 file location here`;\nfunction random_sound(sounds)\n{\nreturn sounds[Math.floor(Math.random()*sounds.length)];\n}\n\nvar sounds = [m1, m2];\n\nlet roll = new Roll('1d3').roll().total;\nlet soundFile = random_sound(sounds);\nAudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/Javelin01_01_Regular_White_Thumb.webp","actorIds":[]}
{"_id":"bQNBtvxwTEwTE0e3","name":"SiegeProjectile","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nawait wait(500)\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}SiegeBoulder01_01_Regular_White_30ft_1600x500.webm`;\nlet anFileSize = 1200;\nlet anchorX = 0.125;\nswitch(true){\n case (anDist<=1200):\n    anFileSize = 1200;\n    anFile = `${file}SiegeBoulder01_01_Regular_White_30ft_1600x500.webm`;\n    anchorX = 0.125;\n    break;\n case (anDist>2400):\n    anFileSize = 3600;\n    anFile = `${file}SiegeBoulder01_01_Regular_White_90ft_4000x500.webm`;\n    anchorX = 0.05;\n    break;\n default:\n    anFileSize = 2400;\n    anFile = `${file}SiegeBoulder01_01_Regular_White_60ft_2800x500.webm`;\n    anchorX = 0.071;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.6  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n\n// Add some sound to the impact or throw\n/*\nawait wait(500);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast ()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/SiegeBoulder01_01_Regular_White_Thumb.webp","actorIds":[]}
{"name":"LaserShotOrange","permission":{"default":0,"OAAx1jKOg1dYBpA6":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.lElITWAgsh1NVyd9"}},"scope":"global","command":"// Requires at least 1 target\nif (game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif (canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\n    var myStringArray = Array.from(game.user.targets)[0];\n    var arrayLength = game.user.targets.size;\n    for (var i = 0; i < arrayLength; i++) {\n\n        await wait(500)\n\n        let mainTarget = Array.from(game.user.targets)[i];\n        let myToken = canvas.tokens.controlled[0];\n\n        let ray = new Ray(myToken.center, mainTarget.center);\n        let anDeg = -(ray.angle * 57.3);\n        let anDist = ray.distance;\n        // Animation file path\n        let file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n        // Checking for range to target to choose which file to pull\n        let anFile = `${file}LaserShot_01_Regular_Orange_30ft_1600x400.webm`;\n        let anFileSize = 600;\n        let anchorX = 0.125;\n        switch (true) {\n            case (anDist <= 1200):\n                anFileSize = 1200;\n                anFile = `${file}LaserShot_01_Regular_Orange_30ft_1600x400.webm`;\n                anchorX = 0.125;\n                break;\n            case (anDist > 2400):\n                anFileSize = 3600;\n                anFile = `${file}LaserShot_01_Regular_Orange_90ft_4000x400.webm`;\n                anchorX = 0.05;\n                break;\n            default:\n                anFileSize = 2400;\n                anFile = `${file}LaserShot_01_Regular_Orange_60ft_2800x400.webm`;\n                anchorX = 0.071;\n                break;\n        }\n        // Scaling the Height of the animation for consistency across ranges\n        let anScale = anDist / anFileSize;\n        let anScaleY = anDist <= 600 ? 0.6 : anScale;\n\n        let spellAnim =\n        {\n            file: anFile,\n            position: myToken.center,\n            anchor: {\n                x: anchorX,\n                y: 0.5\n            },\n            angle: anDeg,\n            scale: {\n                x: anScale,\n                y: anScaleY\n            }\n        };\n\n        let colorWave =\n            [{\n                filterType: \"wave\",\n                filterId: \"myShockwave\",\n                time: 0,\n                strength: 0.03,\n                frequency: 15,\n                maxIntensity: 4.0,\n                minIntensity: 0.5,\n                padding: 25,\n                animated:\n                {\n                    time:\n                    {\n                        active: true,\n                        speed: 0.0180,\n                        animType: \"move\",\n                    }\n                }\n            },\n            {\n                filterType: \"xfire\",\n                filterId: \"myColdXFire\",\n                time: 0,\n                color: 0x0075B0,\n                blend: 1,\n                amplitude: 1,\n                dispersion: 0,\n                chromatic: false,\n                scaleX: 1,\n                scaleY: 1,\n                inlay: false,\n                animated:\n                {\n                    time:\n                    {\n                        active: true,\n                        speed: -0.0015,\n                        animType: \"move\"\n                    }\n                }\n            }];\n\n        async function SpellAnimation(number) {\n\n            let x = number;\n            let interval = 250;\n            for (var i = 0; i < x; i++) {\n                setTimeout(function () {\n                    canvas.fxmaster.playVideo(spellAnim);\n                    game.socket.emit('module.fxmaster', spellAnim);\n                    // Add Sound in the loop\n                    /*\n                        let soundFile = `sound path and file here`;\n                        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n                    */\n                }, i * interval);\n            }\n            await wait(interval * x + 500);\n            // Removes TMFX after animation loops\n            /*\n            TokenMagic.deleteFiltersOnTargeted();\n            */\n        }\n        // The number in parenthesis sets the number of times the animation loops\n        SpellAnimation(3)\n\n        // Adds TMFX to target\n        /*\n        await wait(250);\n        TokenMagic.addUpdateFiltersOnTargeted(colorWave);\n        */\n\n    }\n}\nCast()","author":"OAAx1jKOg1dYBpA6","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/LaserShot_01_Regular_Orange_Thumb.webp","actorIds":[],"_id":"emflmBKrNrBt6qWC"}
{"_id":"fCURHdxrSyuQt6HO","name":"DaggerThrown02","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}Dagger02_01_Regular_White_15ft_1000x400.webm`;\nlet anFileSize = 600;\nlet anchorX = 0.2;\nswitch(true){\n case (anDist<=600):\n    anFileSize = 600;\n    anFile = `${file}Dagger02_01_Regular_White_15ft_1000x400.webm`;\n    anchorX = 0.2;\n    break;\n case (anDist>1200):\n    anFileSize = 1800;\n    anFile = `${file}Dagger02_01_Regular_White_45ft_2200x400.webm`;\n    anchorX = 0.091;\n    break;\n default:\n    anFileSize = 1200;\n    anFile = `${file}Dagger02_01_Regular_White_30ft_1600x400.webm`;\n    anchorX = 0.125;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.6  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n\n// Add some sound to the dagger\n/*\nawait sleepNow(300);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n// Or play random sounds on each attack\n/*\nlet soundHome = \"CustomSounds/battle/\";\n\nlet m1 = `sound 01 file location here`;\nlet m2 = `sound 02 file location here`;\nfunction random_sound(sounds)\n{\nreturn sounds[Math.floor(Math.random()*sounds.length)];\n}\n\nvar sounds = [m1, m2];\n\nlet roll = new Roll('1d3').roll().total;\nlet soundFile = random_sound(sounds);\nAudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast ()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/Dagger02_01_Regular_White_Thumb.webp","actorIds":[]}
{"_id":"fk5d8dXC4JjeVqNZ","name":"ArrowLightning","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.qvHCZYcw29tRQoVC"}},"scope":"global","command":"// Requires at least 1 target\nif (game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif (canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\n    var myStringArray = Array.from(game.user.targets)[0];\n    var arrayLength = game.user.targets.size;\n    for (var i = 0; i < arrayLength; i++) {\n\n        await sleepNow(500)\n\n        let mainTarget = Array.from(game.user.targets)[i];\n        let myToken = canvas.tokens.controlled[0];\n\n        let ray = new Ray(myToken.center, mainTarget.center);\n        let anDeg = -(ray.angle * 57.3);\n        let anDist = ray.distance;\n        // Animation file path\n        let file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n        // Checking for range to target to choose which file to pull\n        let anFile = `${file}Arrow01_01_Regular_White_30ft_1600x400.webm`;\n        let anFileSize = 600;\n        let anchorX = 0.125;\n        let boom = 1000;\n        switch (true) {\n            case (anDist <= 1200):\n                anFileSize = 1200;\n                anFile = `${file}Arrow01_01_Regular_White_30ft_1600x400.webm`;\n                anchorX = 0.125;\n                boom = 1250;\n                break;\n            case (anDist > 2400):\n                anFileSize = 3600;\n                anFile = `${file}Arrow01_01_Regular_White_90ft_4000x400.webm`;\n                anchorX = 0.05;\n                boom = 1750;\n                break;\n            default:\n                anFileSize = 2400;\n                anFile = `${file}Arrow01_01_Regular_White_60ft_2800x400.webm`;\n                anchorX = 0.071;\n                boom = 1500;\n                break;\n        }\n        // Scaling the Height of the animation for consistency across ranges\n        let anScale = anDist / anFileSize;\n        let anScaleY = anDist <= 600 ? 0.6 : anScale;\n\n        let spellAnim =\n        {\n            file: anFile,\n            position: myToken.center,\n            anchor: {\n                x: anchorX,\n                y: 0.5\n            },\n            angle: anDeg,\n            scale: {\n                x: anScale,\n                y: anScaleY\n            }\n        };\n\n        let spellAnim2 =\n        {\n            file: \"modules/jb2a_patreon/Library/Generic/Explosion/Explosion_02_Blue_400x400.webm\",\n            position: mainTarget.center,\n            anchor: {\n                x: 0.5,\n                y: 0.5\n            },\n            angle: 0,\n            scale: {\n                x: 1,\n                y: 1\n            }\n        };\n\n        canvas.fxmaster.playVideo(spellAnim);\n        game.socket.emit('module.fxmaster', spellAnim);\n        // Add some sound to the arrow\n        /*\n        let soundFile = `sound path here`;\n        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n        */\n        await sleepNow(boom);\n        canvas.fxmaster.playVideo(spellAnim2);\n        game.socket.emit('module.fxmaster', spellAnim2);\n        // Add some explosive sound to the effect\n        /*\n        await sleepNow(150);\n        let soundFile = `explosion sound path here`;\n        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n        */\n    }\n}\nCast()","author":"ccsO3NtPJs2xE1RS","img":"systems/dnd5e/icons/spells/lightning-blue-1.jpg","actorIds":[]}
{"_id":"gxNCpFqGfO2CBqxR","name":"ArrowExplosive","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.OYqI9AZdT1H09Wv9"}},"scope":"global","command":"// Requires at least 1 target\nif (game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif (canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\n    var myStringArray = Array.from(game.user.targets)[0];\n    var arrayLength = game.user.targets.size;\n    for (var i = 0; i < arrayLength; i++) {\n\n        let mainTarget = Array.from(game.user.targets)[i];\n        let myToken = canvas.tokens.controlled[0];\n\n        let ray = new Ray(myToken.center, mainTarget.center);\n        let anDeg = -(ray.angle * 57.3);\n        let anDist = ray.distance;\n        // Animation file path\n        let file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n        // Checking for range to target to choose which file to pull\n        let anFile = `${file}Arrow01_01_Regular_White_30ft_1600x400.webm`;\n        let anFileSize = 600;\n        let anchorX = 0.125;\n        let boom = 1000;\n        switch (true) {\n            case (anDist <= 1200):\n                anFileSize = 1200;\n                anFile = `${file}Arrow01_01_Regular_White_30ft_1600x400.webm`;\n                anchorX = 0.125;\n                boom = 1250;\n                break;\n            case (anDist > 2400):\n                anFileSize = 3600;\n                anFile = `${file}Arrow01_01_Regular_White_90ft_4000x400.webm`;\n                anchorX = 0.05;\n                boom = 1750;\n                break;\n            default:\n                anFileSize = 2400;\n                anFile = `${file}Arrow01_01_Regular_White_60ft_2800x400.webm`;\n                anchorX = 0.071;\n                boom = 1500;\n                break;\n        }\n        // Scaling the Height of the animation for consistency across ranges\n        let anScale = anDist / anFileSize;\n        let anScaleY = anDist <= 600 ? 0.6 : anScale;\n\n        let spellAnim =\n        {\n            file: anFile,\n            position: myToken.center,\n            anchor: {\n                x: anchorX,\n                y: 0.5\n            },\n            angle: anDeg,\n            scale: {\n                x: anScale,\n                y: anScaleY\n            }\n        };\n\n        let spellAnim2 =\n        {\n            file: \"modules/jb2a_patreon/Library/Generic/Explosion/Explosion_01_Orange_400x400.webm\",\n            position: mainTarget.center,\n            anchor: {\n                x: 0.5,\n                y: 0.5\n            },\n            angle: 0,\n            scale: {\n                x: 1,\n                y: 1\n            }\n        };\n\n        canvas.fxmaster.playVideo(spellAnim);\n        game.socket.emit('module.fxmaster', spellAnim);\n        // Add some sound to the arrow\n        /*\n        let soundFile = `sound path here`;\n        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n        */\n        await sleepNow(boom);\n        canvas.fxmaster.playVideo(spellAnim2);\n        game.socket.emit('module.fxmaster', spellAnim2);\n        // Add some explosive sound to the effect\n        /*\n        await sleepNow(150);\n        let soundFile = `explosion sound path here`;\n        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n        */\n    }\n}\nCast()","author":"ccsO3NtPJs2xE1RS","img":"systems/dnd5e/icons/spells/explosion-red-2.jpg","actorIds":[]}
{"_id":"lcvLt6dmoPp8I5P1","name":"SlingShot","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.BFM8u2JbSaxkuUT7"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}SlingShot_01_Regular_White_15ft_1000x400.webm`;\nlet anFileSize = 600;\nlet anchorX = 0.2;\nswitch(true){\n case (anDist<=600):\n    anFileSize = 600;\n    anFile = `${file}SlingShot_01_Regular_White_15ft_1000x400.webm`;\n    anchorX = 0.2;\n    break;\n case (anDist>1200):\n    anFileSize = 1800;\n    anFile = `${file}SlingShot_01_Regular_White_45ft_2200x400.webm`;\n    anchorX = 0.091;\n    break;\n default:\n    anFileSize = 1200;\n    anFile = `${file}SlingShot_01_Regular_White_30ft_1600x400.webm`;\n    anchorX = 0.125;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.6  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n\n// Add some sound to that sling\n/*\nawait sleepNow(1300);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n// Or play random sounds on each attack\n/*\nlet soundHome = \"CustomSounds/battle/\";\n\nlet m1 = `sound 01 file location here`;\nlet m2 = `sound 02 file location here`;\nfunction random_sound(sounds)\n{\nreturn sounds[Math.floor(Math.random()*sounds.length)];\n}\n\nvar sounds = [m1, m2];\n\nlet roll = new Roll('1d3').roll().total;\nlet soundFile = random_sound(sounds);\nAudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast ()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/SlingShot_01_Regular_White_Thumb.webp","actorIds":[]}
{"_id":"qLlURqNZwroWuT2h","name":"Arrow","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif (game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif (canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\n    var myStringArray = Array.from(game.user.targets)[0];\n    var arrayLength = game.user.targets.size;\n    for (var i = 0; i < arrayLength; i++) {\n\n        await sleepNow(500)\n\n        let mainTarget = Array.from(game.user.targets)[i];\n        let myToken = canvas.tokens.controlled[0];\n\n        let ray = new Ray(myToken.center, mainTarget.center);\n        let anDeg = -(ray.angle * 57.3);\n        let anDist = ray.distance;\n        // Animation file path\n        let file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n        // Checking for range to target to choose which file to pull\n        let anFile = `${file}Arrow01_01_Regular_White_30ft_1600x400.webm`;\n        let anFileSize = 600;\n        let anchorX = 0.125;\n        switch (true) {\n            case (anDist <= 1200):\n                anFileSize = 1200;\n                anFile = `${file}Arrow01_01_Regular_White_30ft_1600x400.webm`;\n                anchorX = 0.125;\n                break;\n            case (anDist > 2400):\n                anFileSize = 3600;\n                anFile = `${file}Arrow01_01_Regular_White_90ft_4000x400.webm`;\n                anchorX = 0.05;\n                break;\n            default:\n                anFileSize = 2400;\n                anFile = `${file}Arrow01_01_Regular_White_60ft_2800x400.webm`;\n                anchorX = 0.071;\n                break;\n        }\n        // Scaling the Height of the animation for consistency across ranges\n        let anScale = anDist / anFileSize;\n        let anScaleY = anDist <= 600 ? 0.6 : anScale;\n\n        let spellAnim =\n        {\n            file: anFile,\n            position: myToken.center,\n            anchor: {\n                x: anchorX,\n                y: 0.5\n            },\n            angle: anDeg,\n            scale: {\n                x: anScale,\n                y: anScaleY\n            }\n        };\n\n        canvas.fxmaster.playVideo(spellAnim);\n        game.socket.emit('module.fxmaster', spellAnim);\n\n        // Add some sound to the arrow\n        /*\n        await sleepNow(300);\n        let soundFile = `sound path here`;\n        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n        */\n        // Or play random sounds on each attack\n        /*\n        let soundHome = \"CustomSounds/battle/\";\n        \n        let m1 = `sound 01 file location here`;\n        let m2 = `sound 02 file location here`;\n        function random_sound(sounds)\n        {\n        return sounds[Math.floor(Math.random()*sounds.length)];\n        }\n        \n        var sounds = [m1, m2];\n        \n        let roll = new Roll('1d3').roll().total;\n        let soundFile = random_sound(sounds);\n        AudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n        */\n    }\n}\nCast()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/Arrow01_01_Regular_White_Thumb.webp","actorIds":[]}
{"_id":"qitlAmJB3KodqUB7","name":"Boulder","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nawait wait(500)\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}BoulderToss01_01_Regular_White_30ft_1600x500.webm`;\nlet anFileSize = 1200;\nlet anchorX = 0.125;\nswitch(true){\n case (anDist<=1200):\n    anFileSize = 1200;\n    anFile = `${file}BoulderToss01_01_Regular_White_30ft_1600x500.webm`;\n    anchorX = 0.125;\n    break;\n case (anDist>2400):\n    anFileSize = 3600;\n    anFile = `${file}BoulderToss01_01_Regular_White_90ft_4000x500.webm`;\n    anchorX = 0.05;\n    break;\n default:\n    anFileSize = 2400;\n    anFile = `${file}BoulderToss01_01_Regular_White_60ft_2800x500.webm`;\n    anchorX = 0.071;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.6  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n// Add some sound to the impact or throw\n/*\nawait wait(500);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast ()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/BoulderToss01_01_Regular_White_Thumb.webp","actorIds":[]}
{"_id":"ty2j2Ag5fX2VBJXc","name":"KunaiThrown","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}Kunai01_01_Regular_White_15ft_1000x400.webm`;\nlet anFileSize = 600;\nlet anchorX = 0.2;\nswitch(true){\n case (anDist<=600):\n    anFileSize = 600;\n    anFile = `${file}Kunai01_01_Regular_White_15ft_1000x400.webm`;\n    anchorX = 0.2;\n    break;\n case (anDist>1200):\n    anFileSize = 1800;\n    anFile = `${file}Kunai01_01_Regular_White_45ft_2200x400.webm`;\n    anchorX = 0.091;\n    break;\n default:\n    anFileSize = 1200;\n    anFile = `${file}Kunai01_01_Regular_White_30ft_1600x400.webm`;\n    anchorX = 0.125;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.6  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n\n// Add some sound to the dagger\n/*\nawait sleepNow(300);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n// Or play random sounds on each attack\n/*\nlet soundHome = \"CustomSounds/battle/\";\n\nlet m1 = `sound 01 file location here`;\nlet m2 = `sound 02 file location here`;\nfunction random_sound(sounds)\n{\nreturn sounds[Math.floor(Math.random()*sounds.length)];\n}\n\nvar sounds = [m1, m2];\n\nlet roll = new Roll('1d3').roll().total;\nlet soundFile = random_sound(sounds);\nAudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast ()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/Kunai01_01_Regular_White_Thumb.webp","actorIds":[]}
{"_id":"ueJzwHNeTNL8pCVl","name":"HandaxeThrown","permission":{"default":0,"ccsO3NtPJs2xE1RS":3},"type":"script","flags":{"furnace":{"runAsGM":false},"combat-utility-belt":{"macroTrigger":""},"core":{"sourceId":"Macro.IHti68rYGIVejpF9"}},"scope":"global","command":"// Requires at least 1 target\nif(game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif(canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst sleepNow = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\nvar myStringArray = Array.from(game.user.targets)[0];\nvar arrayLength = game.user.targets.size;\nfor (var i = 0; i < arrayLength; i++) {\n\nlet mainTarget = Array.from(game.user.targets)[i];\nlet myToken = canvas.tokens.controlled [0];\n\nlet ray = new Ray(myToken.center, mainTarget.center);\nlet anDeg = -(ray.angle * 57.3);\nlet anDist = ray.distance;\n// Animation file path\nlet file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n// Checking for range to target to choose which file to pull\nlet anFile = `${file}HandAxe01_01_Regular_White_15ft_1000x400.webm`;\nlet anFileSize = 600;\nlet anchorX = 0.2;\nswitch(true){\n case (anDist<=600):\n    anFileSize = 600;\n    anFile = `${file}HandAxe01_01_Regular_White_15ft_1000x400.webm`;\n    anchorX = 0.2;\n    break;\n case (anDist>1200):\n    anFileSize = 1800;\n    anFile = `${file}HandAxe01_01_Regular_White_45ft_2200x400.webm`;\n    anchorX = 0.091;\n    break;\n default:\n    anFileSize = 1200;\n    anFile = `${file}HandAxe01_01_Regular_White_30ft_1600x400.webm`;\n    anchorX = 0.125;\n    break;\n}\n// Scaling the Height of the animation for consistency across ranges\nlet anScale = anDist / anFileSize;\nlet anScaleY = anDist <= 600 ? 0.6  : anScale;\n\nlet spellAnim = \n                    {\n                     file: anFile,\n                      position: myToken.center,\n                      anchor: {\n                       x: anchorX,\n                       y: 0.5\n                      },\n                      angle: anDeg,\n                      scale: {\n                       x: anScale,\n                       y: anScaleY\n                      }\n                    }; \n\ncanvas.fxmaster.playVideo(spellAnim);\ngame.socket.emit('module.fxmaster', spellAnim);\n\n// Add some sound to the axe throw\n/*\nawait sleepNow(300);\nlet soundFile = `sound path here`;\nAudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n*/\n// Or play random sounds on each attack\n/*\nlet soundHome = \"CustomSounds/battle/\";\n\nlet m1 = `sound 01 file location here`;\nlet m2 = `sound 02 file location here`;\nfunction random_sound(sounds)\n{\nreturn sounds[Math.floor(Math.random()*sounds.length)];\n}\n\nvar sounds = [m1, m2];\n\nlet roll = new Roll('1d3').roll().total;\nlet soundFile = random_sound(sounds);\nAudioHelper.play({src: soundHome + soundFile, volume: 0.9, autoplay: true, loop: false}, true);\n*/\n}\n}\nCast ()","author":"ccsO3NtPJs2xE1RS","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/HandAxe01_01_Regular_White_Thumb.webp","actorIds":[]}
{"name":"LaserShotRed","permission":{"default":0,"OAAx1jKOg1dYBpA6":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Macro.lElITWAgsh1NVyd9"}},"scope":"global","command":"// Requires at least 1 target\nif (game.user.targets.size == 0) ui.notifications.error('You must target at least one token');\n// Requires token to be slected\nif (canvas.tokens.controlled.length == 0) ui.notifications.error(\"Please select your token\");\n// Requires FX Master Module\nif (!canvas.fxmaster) ui.notifications.error(\"This macro depends on the FXMaster module. Make sure it is installed and enabled\");\nconst wait = (delay) => new Promise((resolve) => setTimeout(resolve, delay))\n\nasync function Cast() {\n    var myStringArray = Array.from(game.user.targets)[0];\n    var arrayLength = game.user.targets.size;\n    for (var i = 0; i < arrayLength; i++) {\n\n        await wait(500)\n\n        let mainTarget = Array.from(game.user.targets)[i];\n        let myToken = canvas.tokens.controlled[0];\n\n        let ray = new Ray(myToken.center, mainTarget.center);\n        let anDeg = -(ray.angle * 57.3);\n        let anDist = ray.distance;\n        // Animation file path\n        let file = \"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/\";\n        // Checking for range to target to choose which file to pull\n        let anFile = `${file}LaserShot_01_Regular_Red_30ft_1600x400.webm`;\n        let anFileSize = 600;\n        let anchorX = 0.125;\n        switch (true) {\n            case (anDist <= 1200):\n                anFileSize = 1200;\n                anFile = `${file}LaserShot_01_Regular_Red_30ft_1600x400.webm`;\n                anchorX = 0.125;\n                break;\n            case (anDist > 2400):\n                anFileSize = 3600;\n                anFile = `${file}LaserShot_01_Regular_Red_90ft_4000x400.webm`;\n                anchorX = 0.05;\n                break;\n            default:\n                anFileSize = 2400;\n                anFile = `${file}LaserShot_01_Regular_Red_60ft_2800x400.webm`;\n                anchorX = 0.071;\n                break;\n        }\n        // Scaling the Height of the animation for consistency across ranges\n        let anScale = anDist / anFileSize;\n        let anScaleY = anDist <= 600 ? 0.6 : anScale;\n\n        let spellAnim =\n        {\n            file: anFile,\n            position: myToken.center,\n            anchor: {\n                x: anchorX,\n                y: 0.5\n            },\n            angle: anDeg,\n            scale: {\n                x: anScale,\n                y: anScaleY\n            }\n        };\n\n        let colorWave =\n            [{\n                filterType: \"wave\",\n                filterId: \"myShockwave\",\n                time: 0,\n                strength: 0.03,\n                frequency: 15,\n                maxIntensity: 4.0,\n                minIntensity: 0.5,\n                padding: 25,\n                animated:\n                {\n                    time:\n                    {\n                        active: true,\n                        speed: 0.0180,\n                        animType: \"move\",\n                    }\n                }\n            },\n            {\n                filterType: \"xfire\",\n                filterId: \"myColdXFire\",\n                time: 0,\n                color: 0x0075B0,\n                blend: 1,\n                amplitude: 1,\n                dispersion: 0,\n                chromatic: false,\n                scaleX: 1,\n                scaleY: 1,\n                inlay: false,\n                animated:\n                {\n                    time:\n                    {\n                        active: true,\n                        speed: -0.0015,\n                        animType: \"move\"\n                    }\n                }\n            }];\n\n        async function SpellAnimation(number) {\n\n            let x = number;\n            let interval = 250;\n            for (var i = 0; i < x; i++) {\n                setTimeout(function () {\n                    canvas.fxmaster.playVideo(spellAnim);\n                    game.socket.emit('module.fxmaster', spellAnim);\n                    // Add Sound in the loop\n                    /*\n                        let soundFile = `sound path and file here`;\n                        AudioHelper.play({src: soundFile, volume: 1.0, autoplay: true, loop: false}, true);\n                    */\n                }, i * interval);\n            }\n            await wait(interval * x + 500);\n            // Removes TMFX after animation loops\n            /*\n            TokenMagic.deleteFiltersOnTargeted();\n            */\n        }\n        // The number in parenthesis sets the number of times the animation loops\n        SpellAnimation(3)\n\n        // Adds TMFX to target\n        /*\n        await wait(250);\n        TokenMagic.addUpdateFiltersOnTargeted(colorWave);\n        */\n\n    }\n}\nCast()","author":"OAAx1jKOg1dYBpA6","img":"modules/jb2a_patreon/Library/Generic/Weapon_Attacks/Ranged/LaserShot_01_Regular_Red_Thumb.webp","actorIds":[],"_id":"yqWjWgwhthewnZJZ"}
